<launch>
  <node pkg="tf_transform_republisher" type="tf_transform_republisher_node" name="far_vehicle_republisher" output="screen">
    <param name="publish_frequency"                   value="1000" />
    <param name="static_tf_transform"                 value="false" />
    <param name="input_tf_transform_parent_frame_id"  value="base_link" />
    <param name="input_tf_transform_child_frame_id"   value="livox_laser" />
    <param name="output_tf_transform_parent_frame_id" value="sensor" />
    <param name="output_tf_transform_child_frame_id"  value="vehicle" />
  </node>

  <node pkg="loam_interface" type="loamInterface" name="loamInterface" output="screen" required="true">
    <param name="stateEstimationTopic" type="string" value="/aft_mapped_to_init" />
    <param name="registeredScanTopic" type="string" value="/cloud_registered" />
    <param name="flipStateEstimation" type="bool" value="false" />
    <param name="flipRegisteredScan" type="bool" value="false" />
    <param name="sendTF" type="bool" value="true" />
    <param name="reverseTF" type="bool" value="false" />
  </node>

  <include file="$(find terrain_analysis)/launch/terrain_analysis.launch" />

  <include file="$(find terrain_analysis_ext)/launch/terrain_analysis_ext.launch" />

  <node pkg="topic_tools" type="transform" name="twist_to_cmd" required="true" args="/twist_cmd /cmd_vel geometry_msgs/Twist 'm.twist'" />

  <include file="$(find far_planner)/launch/far_planner.launch" >
    <arg name="odom_topic" value="/aft_mapped_to_init"/>
    <arg name="scan_cloud_topic" value="/cloud_registered"/>
  </include>

  <node pkg="tf" type="static_transform_publisher" name="vehicle_broadcaster" args="0 0 0 0 0 0 1 sensor vehicle 1" />

  <remap from="/cmd_vel" to="/twist_cmd" />
  <include file="$(find sentry_bringup)/launch/local_planner.launch" />
</launch>